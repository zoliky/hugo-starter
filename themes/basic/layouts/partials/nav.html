<nav class="nav">
  <ul class="nav-menu">
    {{ $currentPage := . }}
    {{ range .Site.Menus.main }}
    <li class="menu-item {{- if $currentPage.HasMenuCurrent "main" . }}active{{ end }}">
      <a href="{{ .URL }}">{{ .Name }}</a>
      {{ if .HasChildren }}
      <ul class="sub-menu">
        {{ range .Children }}
        <li class="{{ if $currentPage.IsMenuCurrent "main" . }}active{{ end }}">
          <a href="{{ .URL }}">{{ .Name }}</a>
          {{ range .Children }}
          <li class="{{ if $currentPage.IsMenuCurrent "main" . }}active{{ end }}">
            <a href="{{ .URL }}">{{ .Name }}</a>
          </li>
          {{ end }}
        </li>
        {{ end }}
      </ul>
      {{ end }}
    </li>
    {{ end }}
  </ul>
</nav>