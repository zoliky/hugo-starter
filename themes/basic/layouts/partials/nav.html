<nav class="main-navigation">
  <button class="menu-toggle">
    <svg class="icon icon-hamburger" aria-hidden="true" role="img">
      <use href="#icon-hamburger" xlink:href="#icon-hamburger"></use>
    </svg>
    <svg class="icon icon-close" aria-hidden="true" role="img">
      <use href="#icon-close" xlink:href="#icon-close"></use>
    </svg> Menu
  </button>

  <div class="menu-container">
    <ul id="top-menu" class="menu">
    {{ $currentPage := . }}
    {{ range .Site.Menus.main }}
    <li class="menu-item {{ if .HasChildren }}menu-item-has-children{{ end}}">
      <a href="{{ .URL }}">
        {{ .Name }}
        {{ if .HasChildren }}
        <svg class="icon icon-angle-down" aria-hidden="true" role="img">
          <use href="#icon-angle-down" xlink:href="#icon-angle-down"></use>
        </svg>
        {{ end }}
      </a>
      {{ if .HasChildren }}
      <button class="dropdown-toggle">
        <svg class="icon icon-angle-down">
          <use href="#icon-angle-down" xlink:href="#icon-angle-down" />
        </svg>
      </button>
      <ul class="sub-menu">
        {{ range .Children }}
        <li class="menu-item">
          <a href="{{ .URL }}">
            {{ .Name }}
            {{ if .HasChildren }}
            <svg class="icon icon-angle-down">
              <use href="#icon-angle-down" xlink:href="#icon-angle-down"></use>
            </svg>
            {{ end }}
          </a>
          {{ if .HasChildren }}
          <button class="dropdown-toggle">
            <svg class="icon icon-angle-down">
              <use href="#icon-angle-down" xlink:href="#icon-angle-down"></use>
            </svg>
          </button>
          {{ end }}
        </li>
        {{ end }}
      </ul>
      {{ end }}

    </li>
    {{ end }}
    </ul>
  </div>
</nav>